var d=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Se=class{static fromArray(t,r){let n=r||new be;for(let i=t.length-1;i>=0;--i)n=new he(t[i],n);return n}[Symbol.iterator](){return new tn(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof be}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function p(e,t){return new he(e,t)}function _(e,t){return Se.fromArray(e,t)}var tn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof be)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},be=class extends Se{},he=class extends Se{constructor(t,r){super(),this.head=t,this.tail=r}},Bt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Ct(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Ct(this.rawBuffer,this.bitOffset,i),o=Ct(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Ct(this.rawBuffer,this.bitOffset,r),s=Ct(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Ri("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Ri("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Ct(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Fi={};function Ri(e,t){Fi[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Fi[e]=!0)}var pt=class e extends d{static isResult(t){return t instanceof e}},v=class extends pt{constructor(t){super(),this[0]=t}isOk(){return!0}},L=class extends pt{constructor(t){super(),this[0]=t}isOk(){return!1}};function I(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Gi(n)||!Gi(i)||!mu(n,i)||cu(n,i)||fu(n,i)||pu(n,i)||du(n,i)||hu(n,i)||_u(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[a,u]=lu(n);for(let l of a(n))r.push(u(n,l),u(i,l))}return!0}function lu(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function cu(e,t){return e instanceof Date&&(e>t||e<t)}function fu(e,t){return!(e instanceof Bt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function pu(e,t){return Array.isArray(e)&&e.length!==t.length}function du(e,t){return e instanceof Map&&e.size!==t.size}function hu(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function _u(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Gi(e){return typeof e=="object"&&e!==null}function mu(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function qt(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let a in s)o[a]=s[a];return o}var g=class extends d{constructor(t){super(),this[0]=t}},A=class extends d{};function rn(e,t){if(e instanceof g){let r=e[0];return new v(r)}else return new L(t)}function Hi(e,t){return e instanceof g?e[0]:t}var Vi=new WeakMap,nn=new DataView(new ArrayBuffer(8)),sn=0;function on(e){let t=Vi.get(e);if(t!==void 0)return t;let r=sn++;return sn===2147483647&&(sn=0),Vi.set(e,r),r}function un(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ln(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ji(e){nn.setFloat64(0,e);let t=nn.getInt32(0),r=nn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function xu(e){return ln(e.toString())}function $u(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return on(e);if(e instanceof Date)return Ji(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+_e(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+_e(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+un(_e(n),_e(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+un(_e(o),ln(s))|0}}return r}function _e(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ji(e);case"string":return ln(e);case"bigint":return xu(e);case"object":return $u(e);case"symbol":return on(e);case"function":return on(e);default:return 0}}var Ee=5,cn=Math.pow(2,Ee),wu=cn-1,gu=cn/2,bu=cn/4,ue=0,Oe=1,ce=2,tt=3,fn={type:ce,bitmap:0,array:[]};function Nt(e,t){return e>>>t&wu}function cr(e,t){return 1<<Nt(e,t)}function yu(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function pn(e,t){return yu(e&t-1)}function me(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function ku(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function an(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Xi(e,t,r,n,i,s){let o=_e(t);if(o===n)return{type:tt,hash:o,array:[{type:ue,k:t,v:r},{type:ue,k:i,v:s}]};let a={val:!1};return It(dn(fn,e,o,t,r,a),e,n,i,s,a)}function It(e,t,r,n,i,s){switch(e.type){case Oe:return vu(e,t,r,n,i,s);case ce:return dn(e,t,r,n,i,s);case tt:return Lu(e,t,r,n,i,s)}}function vu(e,t,r,n,i,s){let o=Nt(r,t),a=e.array[o];if(a===void 0)return s.val=!0,{type:Oe,size:e.size+1,array:me(e.array,o,{type:ue,k:n,v:i})};if(a.type===ue)return I(n,a.k)?i===a.v?e:{type:Oe,size:e.size,array:me(e.array,o,{type:ue,k:n,v:i})}:(s.val=!0,{type:Oe,size:e.size,array:me(e.array,o,Xi(t+Ee,a.k,a.v,r,n,i))});let u=It(a,t+Ee,r,n,i,s);return u===a?e:{type:Oe,size:e.size,array:me(e.array,o,u)}}function dn(e,t,r,n,i,s){let o=cr(r,t),a=pn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[a];if(u.type!==ue){let f=It(u,t+Ee,r,n,i,s);return f===u?e:{type:ce,bitmap:e.bitmap,array:me(e.array,a,f)}}let l=u.k;return I(n,l)?i===u.v?e:{type:ce,bitmap:e.bitmap,array:me(e.array,a,{type:ue,k:n,v:i})}:(s.val=!0,{type:ce,bitmap:e.bitmap,array:me(e.array,a,Xi(t+Ee,l,u.v,r,n,i))})}else{let u=e.array.length;if(u>=gu){let l=new Array(32),f=Nt(r,t);l[f]=dn(fn,t+Ee,r,n,i,s);let c=0,m=e.bitmap;for(let b=0;b<32;b++){if((m&1)!==0){let $=e.array[c++];l[b]=$}m=m>>>1}return{type:Oe,size:u+1,array:l}}else{let l=ku(e.array,a,{type:ue,k:n,v:i});return s.val=!0,{type:ce,bitmap:e.bitmap|o,array:l}}}}function Lu(e,t,r,n,i,s){if(r===e.hash){let o=hn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:tt,hash:r,array:me(e.array,o,{type:ue,k:n,v:i})};let a=e.array.length;return s.val=!0,{type:tt,hash:r,array:me(e.array,a,{type:ue,k:n,v:i})}}return It({type:ce,bitmap:cr(e.hash,t),array:[e]},t,r,n,i,s)}function hn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(I(t,e.array[n].k))return n;return-1}function lr(e,t,r,n){switch(e.type){case Oe:return ju(e,t,r,n);case ce:return Su(e,t,r,n);case tt:return Ou(e,n)}}function ju(e,t,r,n){let i=Nt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==ue)return lr(s,t+Ee,r,n);if(I(n,s.k))return s}}function Su(e,t,r,n){let i=cr(r,t);if((e.bitmap&i)===0)return;let s=pn(e.bitmap,i),o=e.array[s];if(o.type!==ue)return lr(o,t+Ee,r,n);if(I(n,o.k))return o}function Ou(e,t){let r=hn(e,t);if(!(r<0))return e.array[r]}function _n(e,t,r,n){switch(e.type){case Oe:return Eu(e,t,r,n);case ce:return zu(e,t,r,n);case tt:return Au(e,n)}}function Eu(e,t,r,n){let i=Nt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ue){if(!I(s.k,n))return e}else if(o=_n(s,t+Ee,r,n),o===s)return e;if(o===void 0){if(e.size<=bu){let a=e.array,u=new Array(e.size-1),l=0,f=0,c=0;for(;l<i;){let m=a[l];m!==void 0&&(u[f]=m,c|=1<<l,++f),++l}for(++l;l<a.length;){let m=a[l];m!==void 0&&(u[f]=m,c|=1<<l,++f),++l}return{type:ce,bitmap:c,array:u}}return{type:Oe,size:e.size-1,array:me(e.array,i,o)}}return{type:Oe,size:e.size,array:me(e.array,i,o)}}function zu(e,t,r,n){let i=cr(r,t);if((e.bitmap&i)===0)return e;let s=pn(e.bitmap,i),o=e.array[s];if(o.type!==ue){let a=_n(o,t+Ee,r,n);return a===o?e:a!==void 0?{type:ce,bitmap:e.bitmap,array:me(e.array,s,a)}:e.bitmap===i?void 0:{type:ce,bitmap:e.bitmap^i,array:an(e.array,s)}}return I(n,o.k)?e.bitmap===i?void 0:{type:ce,bitmap:e.bitmap^i,array:an(e.array,s)}:e}function Au(e,t){let r=hn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:tt,hash:e.hash,array:an(e.array,r)}}function Zi(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===ue){t(s.v,s.k);continue}Zi(s,t)}}}var De=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=lr(this.root,0,_e(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?fn:this.root,s=It(i,0,_e(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=_n(this.root,0,_e(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:lr(this.root,0,_e(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Zi(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+un(_e(r),_e(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!I(t.get(n,!r),r))throw Yi}),!0}catch(r){if(r===Yi)return!1;throw r}}},Yi=Symbol();var H=class extends d{},P=class extends d{},K=class extends d{};function Uu(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function mt(e){return Uu(e,"")}var nt=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Ye=class extends d{constructor(t){super(),this.function=t}};function Je(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new v(n):new L(i)}function $t(e){return new Ye(t=>[e,_([])])}function pr(e,t){return new Ye(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Xu(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,a=s.tail,u=o.function(n),l=u;if(u[1].hasLength(0))return l;e=n,t=i,r=a}}}function cs(e,t){return new Ye(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Xu(r,i,t)})}function fs(e,t,r){let n=r(e);return n.isOk()?[n[0],_([])]:[n[0],_([new nt(t,ht(e),_([]))])]}function Zu(e){return fs(e,"Int",hs)}var ps=new Ye(Zu);function Ku(e){return fs(e,"String",_s)}var wt=new Ye(Ku);function mn(e,t){let r=cs(wt,_([pr(ps,ye)])),n=ze(t,s=>{let o=s,a=Je(o,r);return a.isOk()?a[0]:"<"+ht(o)+">"}),i=ze(e[1],s=>{let o=s;return new nt(o.expected,o.found,Ae(n,s.path))});return[e[0],i]}function Qu(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,l=i;if(s.hasLength(0)){let f=a(u);return mn(f,D(o))}else{let f=s.head,c=s.tail,m=ds(u,f);if(m.isOk()&&m[0]instanceof g){let b=m[0][0];e=c,t=p(f,o),r=a,n=b,i=l}else{if(m.isOk()&&m[0]instanceof A)return l(u,p(f,o));{let b=m[0],h=[a(u)[0],_([new nt(b,ht(u),_([]))])];return mn(h,D(o))}}}}}function xn(e,t,r){return new Ye(n=>{let i=Qu(e,_([]),t.function,n,(f,c)=>{let $=[t.function(f)[0],_([new nt("Field","Nothing",_([]))])];return mn($,D(c))}),s=i[0],o=i[1],a=r(s).function(n),u=a[0],l=a[1];return[u,Ae(o,l)]})}function dr(e,t,r){return xn(_([e]),t,r)}var ea=void 0,xs={};function ye(e){return e.toString()}function st(e){return[e.charCodeAt(0)|0,e.slice(1)]}function xe(e){return e.toLowerCase()}function Q(e,t,r){return e.slice(t,t+r)}function xt(e,t){return e.startsWith(t)}var ws=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),_f=new RegExp(`^[${ws}]*`),mf=new RegExp(`[${ws}]*$`);function Dt(){return De.new()}function Wt(e,t){let r=e.get(t,xs);return r===xs?new L(ea):new v(r)}function gs(e,t,r){return r.set(e,t)}function ht(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof pt)return"Result";if(e instanceof Se)return"List";if(e instanceof Bt)return"BitArray";if(e instanceof De)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return"Array";if(typeof e=="number")return"Float";if(e===null)return"Nil";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function ds(e,t){if(e instanceof De||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new v(new A):new v(new g(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Se){let n=0;for(let i of e){if(n===t)return new v(new g(i));n++}return new L("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new v(new g(e[t])):new v(new A):new L(r?"Indexable":"Dict")}function hs(e){return Number.isInteger(e)?new v(e):new L(0)}function _s(e){return typeof e=="string"?new v(e):new L("")}function Pt(e,t,r){return gs(t,r,e)}var R=class extends d{},Te=class extends d{};function gt(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function D(e){return gt(e,_([]))}function ra(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return D(s);{let o=n.head;e=n.tail,t=i,r=p(i(o),s)}}}function ze(e,t){return ra(e,t,_([]))}function na(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function Ae(e,t){return na(D(e),t)}function ke(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function ia(e,t,r,n,i,s){for(;;){let o=e,a=t,u=r,l=n,f=i,c=s,m=p(f,u);if(o.hasLength(0))return l instanceof R?p(D(m),c):p(m,c);{let b=o.head,$=o.tail,y=a(f,b);if(y instanceof K&&l instanceof Te)e=$,t=a,r=m,n=l,i=b,s=c;else if(y instanceof H&&l instanceof R)e=$,t=a,r=m,n=l,i=b,s=c;else if(y instanceof P&&l instanceof R)e=$,t=a,r=m,n=l,i=b,s=c;else if(y instanceof K&&l instanceof R){let h;l instanceof R?h=p(D(m),c):h=p(m,c);let k=h;if($.hasLength(0))return p(_([b]),k);{let w=$.head,j=$.tail,S,x=a(b,w);x instanceof H?S=new R:x instanceof P?S=new R:S=new Te;let O=S;e=j,t=a,r=_([b]),n=O,i=w,s=k}}else if(y instanceof H&&l instanceof Te){let h;l instanceof R?h=p(D(m),c):h=p(m,c);let k=h;if($.hasLength(0))return p(_([b]),k);{let w=$.head,j=$.tail,S,x=a(b,w);x instanceof H?S=new R:x instanceof P?S=new R:S=new Te;let O=S;e=j,t=a,r=_([b]),n=O,i=w,s=k}}else{let h;l instanceof R?h=p(D(m),c):h=p(m,c);let k=h;if($.hasLength(0))return p(_([b]),k);{let w=$.head,j=$.tail,S,x=a(b,w);x instanceof H?S=new R:x instanceof P?S=new R:S=new Te;let O=S;e=j,t=a,r=_([b]),n=O,i=w,s=k}}}}}function sa(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return gt(s,a);if(s.hasLength(0))return gt(i,a);{let u=i.head,l=i.tail,f=s.head,c=s.tail,m=o(u,f);m instanceof H?(e=l,t=s,r=o,n=p(u,a)):m instanceof K?(e=i,t=c,r=o,n=p(f,a)):(e=i,t=c,r=o,n=p(f,a))}}}function oa(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return D(s);if(n.hasLength(1)){let o=n.head;return D(p(D(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,l=sa(o,a,i,_([]));e=u,t=i,r=p(l,s)}}}function ua(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return gt(s,a);if(s.hasLength(0))return gt(i,a);{let u=i.head,l=i.tail,f=s.head,c=s.tail,m=o(u,f);m instanceof H?(e=i,t=c,r=o,n=p(f,a)):m instanceof K?(e=l,t=s,r=o,n=p(u,a)):(e=l,t=s,r=o,n=p(u,a))}}}function aa(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return D(s);if(n.hasLength(1)){let o=n.head;return D(p(D(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,l=ua(o,a,i,_([]));e=u,t=i,r=p(l,s)}}}function la(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return _([]);if(n.hasLength(1)&&i instanceof R)return n.head;if(n.hasLength(1)&&i instanceof Te){let o=n.head;return D(o)}else i instanceof R?(e=oa(n,s,_([])),t=new Te,r=s):(e=aa(n,s,_([])),t=new R,r=s)}}function $n(e,t){if(e.hasLength(0))return _([]);if(e.hasLength(1)){let r=e.head;return _([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof H?s=new R:o instanceof P?s=new R:s=new Te;let a=s,u=ia(i,t,_([r]),a,n,_([]));return la(u,new R,t)}}function ca(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.atLeastLength(1)&&I(i.head[0],s)){let u=i.head[0],l=i.tail;return gt(a,p([u,o],l))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,r=o,n=p(u,a)}else return D(p([s,o],a))}}function wn(e,t,r){return ca(e,t,r,_([]))}function bs(e){return!!e.isOk()}function Ut(e,t){if(e.isOk()){let r=e[0];return new v(t(r))}else{let r=e[0];return new L(r)}}function Ft(e,t){if(e.isOk()){let r=e[0];return new v(r)}else{let r=e[0];return new L(t(r))}}function Rt(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new L(r)}}function Xe(e,t){return Rt(e,t)}function bn(e){return e.isOk(),e[0]}function hr(e,t){if(e.isOk()){let r=e[0];return new v(r)}else return new L(t)}function yn(e,t,r){return e?t:r()}var Gt=class extends d{},Ht=class extends d{},kn=class extends d{},vn=class extends d{},Ln=class extends d{},jn=class extends d{},Sn=class extends d{},On=class extends d{},En=class extends d{};var _r=class extends d{},Vt=class extends d{};function ks(e){return e instanceof Sn?"CONNECT":e instanceof Ln?"DELETE":e instanceof Gt?"GET":e instanceof kn?"HEAD":e instanceof On?"OPTIONS":e instanceof En?"PATCH":e instanceof Ht?"POST":e instanceof vn?"PUT":e instanceof jn?"TRACE":e[0]}function vs(e){return e instanceof _r?"http":"https"}function Ls(e){let t=xe(e);return t==="http"?new v(new _r):t==="https"?new v(new Vt):new L(void 0)}var xr=class extends d{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function Tn(e){return JSON.stringify(e)}function Ss(e){return Object.fromEntries(e)}function Os(e){try{let t=JSON.parse(e);return new v(t)}catch(t){return new L(xa(t,e))}}function xa(e,t){return $a(e)?new wr:wa(e,t)}function $a(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function wa(e,t){let r=[ga,ba,ka,ya];for(let n of r){let i=n(e,t);if(i)return i}return new Ze("",0)}function ga(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=$r(r[1]);return new Ze(n,-1)}function ba(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=$r(r[1]),i=Number(r[2]);return new Ze(n,i)}function ya(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=va(i,s,t),a=$r(t[o]);return new Ze(a,o)}function ka(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=$r(r[2]);return new Ze(n,0)}function $r(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function va(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var wr=class extends d{},Ze=class extends d{constructor(t){super(),this[0]=t}};var Cn=class extends d{constructor(t){super(),this[0]=t}};function La(e,t){return Xe(Os(e),r=>{let n=Je(r,t);return Ft(n,i=>new Cn(i))})}function gr(e,t){return La(e,t)}function qn(e){return Tn(e)}function Pe(e){return e}function bt(e){return Ss(e)}function ae(e){return e}var yr=class extends d{constructor(t){super(),this.dict=t}};function zs(){return new yr(Dt())}function Nn(e,t){let r=e.dict,n=Wt(r,t);return bs(n)}var Oa=void 0;function As(e,t){return new yr(Pt(e.dict,t,Oa))}var za=De.new();function kr(){return za}var Aa=zs();function Yt(){return Aa}var ve=globalThis?.document,vr="http://www.w3.org/1999/xhtml",Lr=1,jr=3,Sr=11,Ts=!!globalThis.HTMLElement?.prototype?.moveBefore;var T=_([]),Or=new A;var Ta=new K,Ca=new H,Ba=new P;function Er(e,t){return e.name===t.name?Ba:e.name<t.name?Ca:Ta}var te=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Jt=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},re=class extends d{constructor(t,r,n,i,s,o,a,u,l){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=a,this.debounce=u,this.throttle=l}};function Ma(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof te&&r.head.name==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head instanceof te&&r.head.name==="class"&&r.head.value==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head instanceof te&&r.head.name==="style"&&r.head.value==="")e=r.tail,t=n;else if(r.atLeastLength(2)&&r.head instanceof te&&r.head.name==="class"&&r.tail.head instanceof te&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,a=r.tail.tail,u=s+" "+o,l=new te(i,"class",u);e=p(l,a),t=n}else if(r.atLeastLength(2)&&r.head instanceof te&&r.head.name==="style"&&r.tail.head instanceof te&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,a=r.tail.tail,u=s+";"+o,l=new te(i,"style",u);e=p(l,a),t=n}else{let i=r.head;e=r.tail,t=p(i,n)}}}function Ds(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=$n(e,(n,i)=>Er(i,n));return Ma(r,T)}}var Dn=0;function Ps(e,t){return new te(Dn,e,t)}var Ws=1;var Pn=2;function Us(e,t,r,n,i,s,o,a){return new re(Pn,e,t,r,n,i,s,o,a)}function ot(e,t){return Ps(e,t)}function Fs(e){return ot("class",e)}function Rs(e,t){return e===""||t===""?Fs(""):ot("style",e+":"+t+";")}function Wn(e){return ot("placeholder",e)}var zr=class extends d{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var Gs=new zr(_([]),_([]),_([]));function Ue(){return Gs}function Fn(e){let t=n=>{let i=n.dispatch;return e(i)},r=Gs;return new zr(_([t]),r.before_paint,r.after_paint)}function fe(){return null}function kt(e,t){let r=e?.get(t);return r!=null?new v(r):new L(void 0)}function Zt(e,t,r){return e??=new Map,e.set(t,r),e}function Rn(e,t){return e?.delete(t),e}var Tr=class extends d{},Cr=class extends d{constructor(t,r){super(),this.key=t,this.parent=r}},Gn=class extends d{constructor(t,r){super(),this.index=t,this.parent=r}};function Wa(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(xt(r,i))return!0;e=r,t=s}}}function Fe(e,t,r){return r===""?new Gn(t,e):new Cr(r,e)}var Kt=new Tr,Hn=`
`,Vn="	";function Hs(e,t){for(;;){let r=e,n=t;if(r instanceof Tr){if(n.hasLength(0))return"";{let i=n.tail;return mt(i)}}else if(r instanceof Cr){let i=r.key;e=r.parent,t=p(Vn,p(i,n))}else{let i=r.index;e=r.parent,t=p(Hn,p(ye(i),n))}}}function Vs(e){return Hs(e,_([]))}function Ys(e,t){return t.hasLength(0)?!1:Wa(Vs(e),t)}var Yn="\f";function Jn(e,t){return Hs(e,_([Yn,t]))}var ne=class extends d{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},pe=class extends d{constructor(t,r,n,i,s,o,a,u,l,f){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=a,this.keyed_children=u,this.self_closing=l,this.void=f}},Le=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},we=class extends d{constructor(t,r,n,i,s,o,a){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=a}};function Ra(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function de(e){return e instanceof ne?1+e.children_count:1}var Xn=0;function Js(e,t,r,n,i){return new ne(Xn,e,t,r,n,i)}var Zn=1;function Kn(e,t,r,n,i,s,o,a,u){return new pe(Zn,e,t,r,n,Ds(i),s,o,a,u||Ra(n,r))}var Qn=2;function ei(e,t,r){return new Le(Qn,e,t,r)}var Xs=3;function Zs(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,l=i;if(o.hasLength(0))return[D(u),l];if(o.atLeastLength(1)&&o.head instanceof ne&&o.head.key===""){let f=o.head,c=o.tail,m=s+"::"+ye(a),b=Zs(m,f.children,0,T,fe()),$=b[0],y=b[1],h,k=f;h=new ne(k.kind,k.key,k.mapper,$,y,k.children_count);let j=p(h,u),S=a+1;e=s,t=c,r=S,n=j,i=l}else if(o.atLeastLength(1)&&o.head.key!==""){let f=o.head,c=o.tail,m=s+"::"+f.key,b=ti(m,f),$=p(b,u),y=Zt(l,m,b),h=a+1;e=s,t=c,r=h,n=$,i=y}else{let f=o.head,c=o.tail,m=p(f,u),b=a+1;e=s,t=c,r=b,n=m,i=l}}}function ti(e,t){if(t instanceof pe){let r=t;return new pe(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Le){let r=t;return new Le(r.kind,e,r.mapper,r.content)}else if(t instanceof we){let r=t;return new we(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=Zs(e,r,0,T,fe()),i=n[0],s=n[1],o=t;return new ne(o.kind,e,o.mapper,i,s,o.children_count)}}var ut=class extends d{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},ri=class extends d{constructor(t,r){super(),this.kind=t,this.content=r}},ni=class extends d{constructor(t,r){super(),this.kind=t,this.inner_html=r}},ii=class extends d{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},si=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},oi=class extends d{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},ui=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},ai=class extends d{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},li=class extends d{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function ci(e,t,r,n){return new ut(e,t,r,n)}var fi=0;function Ks(e){return new ri(fi,e)}var pi=1;function Qs(e){return new ni(pi,e)}var di=2;function hi(e,t){return new ii(di,e,t)}var qr=3;function eo(e,t,r){return new si(qr,e,t,r)}var _i=4;function to(e,t){return new oi(_i,e,t)}var Nr=5;function mi(e,t,r){return new ui(Nr,e,t,r)}var Ir=6;function xi(e,t){return new ai(Ir,e,t)}var Mr=7;function ro(e,t){return new li(Mr,e,t)}var Ur=class extends d{constructor(t,r){super(),this.patch=t,this.events=r}},$i=class extends d{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function Ha(e,t,r,n){return r==="input"&&t===""?Pr(e,n):r==="select"&&t===""?Pr(e,n):r==="textarea"&&t===""?Pr(e,n):!1}function io(e,t,r,n,i,s,o,a){for(;;){let u=e,l=t,f=r,c=n,m=i,b=s,$=o,y=a;if(m.hasLength(0)&&b.hasLength(0))return new $i($,y,c);if(m.atLeastLength(1)&&m.head instanceof re&&b.hasLength(0)){let h=m.head,k=m.head.name,w=m.tail,j=p(h,y),S=Dr(c,l,k);e=u,t=l,r=f,n=S,i=w,s=b,o=$,a=j}else if(m.atLeastLength(1)&&b.hasLength(0)){let h=m.head,k=m.tail,w=p(h,y);e=u,t=l,r=f,n=c,i=k,s=b,o=$,a=w}else if(m.hasLength(0)&&b.atLeastLength(1)&&b.head instanceof re){let h=b.head,k=b.head.name,w=b.head.handler,j=b.tail,S=p(h,$),x=er(c,f,l,k,w);e=u,t=l,r=f,n=x,i=m,s=j,o=S,a=y}else if(m.hasLength(0)&&b.atLeastLength(1)){let h=b.head,k=b.tail,w=p(h,$);e=u,t=l,r=f,n=c,i=m,s=k,o=w,a=y}else{let h=m.head,k=m.tail,w=b.head,j=b.tail,S=Er(h,w);if(h instanceof te&&S instanceof P&&w instanceof te){let x,O=w.name;O==="value"||O==="checked"||O==="selected"?x=u||h.value!==w.value:x=h.value!==w.value;let E=x,B;E?B=p(w,$):B=$;let N=B;e=u,t=l,r=f,n=c,i=k,s=j,o=N,a=y}else if(h instanceof Jt&&S instanceof P&&w instanceof Jt){let x,O=w.name;O==="scrollLeft"||O==="scrollRight"?x=!0:O==="value"?x=u||!I(h.value,w.value):O==="checked"?x=u||!I(h.value,w.value):O==="selected"?x=u||!I(h.value,w.value):x=!I(h.value,w.value);let E=x,B;E?B=p(w,$):B=$;let N=B;e=u,t=l,r=f,n=c,i=k,s=j,o=N,a=y}else if(h instanceof re&&S instanceof P&&w instanceof re){let x=w.name,O=w.handler,E=h.prevent_default!==w.prevent_default||h.stop_propagation!==w.stop_propagation||h.immediate!==w.immediate||h.debounce!==w.debounce||h.throttle!==w.throttle,B;E?B=p(w,$):B=$;let N=B,W=er(c,f,l,x,O);e=u,t=l,r=f,n=W,i=k,s=j,o=N,a=y}else if(h instanceof re&&S instanceof P){let x=h.name,O=p(w,$),E=p(h,y),B=Dr(c,l,x);e=u,t=l,r=f,n=B,i=k,s=j,o=O,a=E}else if(S instanceof P&&w instanceof re){let x=w.name,O=w.handler,E=p(w,$),B=p(h,y),N=er(c,f,l,x,O);e=u,t=l,r=f,n=N,i=k,s=j,o=E,a=B}else if(S instanceof P){let x=p(w,$),O=p(h,y);e=u,t=l,r=f,n=c,i=k,s=j,o=x,a=O}else if(S instanceof K&&w instanceof re){let x=w.name,O=w.handler,E=p(w,$),B=er(c,f,l,x,O);e=u,t=l,r=f,n=B,i=m,s=j,o=E,a=y}else if(S instanceof K){let x=p(w,$);e=u,t=l,r=f,n=c,i=m,s=j,o=x,a=y}else if(h instanceof re&&S instanceof H){let x=h.name,O=p(h,y),E=Dr(c,l,x);e=u,t=l,r=f,n=E,i=k,s=b,o=$,a=O}else{let x=p(h,y);e=u,t=l,r=f,n=c,i=k,s=b,o=$,a=x}}}}function wi(e,t,r,n,i,s,o,a,u,l,f,c,m,b){for(;;){let $=e,y=t,h=r,k=n,w=i,j=s,S=o,x=a,O=u,E=l,B=f,N=c,W=m,ie=b;if($.hasLength(0)&&h.hasLength(0))return new Ur(new ut(O,S,B,N),ie);if($.atLeastLength(1)&&h.hasLength(0)){let q=$.head,V=$.tail,z;q.key===""||!Nn(w,q.key)?z=S+de(q):z=S;let Y=z,X=tr(ie,E,x,q);e=V,t=y,r=h,n=k,i=w,s=j,o=Y,a=x,u=O,l=E,f=B,c=N,m=W,b=X}else if($.hasLength(0)&&h.atLeastLength(1)){let q=oo(ie,W,E,x,h),V=xi(h,x-j),z=p(V,B);return new Ur(new ut(O,S,z,N),q)}else if($.atLeastLength(1)&&h.atLeastLength(1)&&$.head.key!==h.head.key){let q=$.head,V=$.tail,z=h.head,se=h.tail,Y=kt(y,z.key),X=kt(k,q.key),le=Nn(w,q.key);if(X.isOk()&&Y.isOk()&&le)e=V,t=y,r=h,n=k,i=w,s=j-de(q),o=S,a=x,u=O,l=E,f=B,c=N,m=W,b=ie;else if(X.isOk()&&Y.isOk()){let U=Y[0],M=de(z),J=x-j,Z=eo(z.key,J,M),oe=p(Z,B),ge=As(w,z.key),je=j+M;e=p(U,$),t=y,r=h,n=k,i=ge,s=je,o=S,a=x,u=O,l=E,f=oe,c=N,m=W,b=ie}else if(!X.isOk()&&Y.isOk()){let U=de(q),M=j-U,J=tr(ie,E,x,q),Z=to(q.key,U),oe=p(Z,B);e=V,t=y,r=h,n=k,i=w,s=M,o=S,a=x,u=O,l=E,f=oe,c=N,m=W,b=J}else if(X.isOk()&&!Y.isOk()){let U=x-j,M=de(z),J=Wr(ie,W,E,x,z),Z=xi(_([z]),U),oe=p(Z,B);e=$,t=y,r=se,n=k,i=w,s=j+M,o=S,a=x+M,u=O,l=E,f=oe,c=N,m=W,b=J}else{let U=de(q),M=de(z),J=mi(x-j,U,z),Z,ge=tr(ie,E,x,q);Z=Wr(ge,W,E,x,z);let je=Z;e=V,t=y,r=se,n=k,i=w,s=j-U+M,o=S,a=x+M,u=O,l=E,f=p(J,B),c=N,m=W,b=je}}else if($.atLeastLength(1)&&$.head instanceof ne&&h.atLeastLength(1)&&h.head instanceof ne){let q=$.head,V=$.tail,z=h.head,se=h.tail,Y=x+1,X=q.children_count,le=z.children_count,U=Ke(W,z.mapper),M=wi(q.children,q.keyed_children,z.children,z.keyed_children,Yt(),j,0,Y,-1,E,T,N,U,ie),J;if(M.patch.removed>0){let ge=Y+le-j,je=ro(ge,M.patch.removed);J=Ae(M.patch.changes,p(je,B))}else J=Ae(M.patch.changes,B);let oe=J;e=V,t=y,r=se,n=k,i=w,s=j+le-X,o=S,a=Y+le,u=O,l=E,f=oe,c=M.patch.children,m=W,b=M.events}else if($.atLeastLength(1)&&$.head instanceof pe&&h.atLeastLength(1)&&h.head instanceof pe&&$.head.namespace===h.head.namespace&&$.head.tag===h.head.tag){let q=$.head,V=$.tail,z=h.head,se=h.tail,Y=Ke(W,z.mapper),X=Fe(E,x,z.key),le=Ha(ie,z.namespace,z.tag,X),U=io(le,X,Y,ie,q.attributes,z.attributes,T,T),M=U.added,J=U.removed,Z=U.events,oe;M.hasLength(0)&&J.hasLength(0)?oe=T:oe=_([hi(M,J)]);let ge=oe,je=wi(q.children,q.keyed_children,z.children,z.keyed_children,Yt(),0,0,0,x,X,ge,T,Y,Z),ft,He=je.patch;He instanceof ut&&He.removed===0&&He.changes.hasLength(0)&&He.children.hasLength(0)?ft=N:ft=p(je.patch,N);let en=ft;e=V,t=y,r=se,n=k,i=w,s=j,o=S,a=x+1,u=O,l=E,f=B,c=en,m=W,b=je.events}else if($.atLeastLength(1)&&$.head instanceof Le&&h.atLeastLength(1)&&h.head instanceof Le&&$.head.content===h.head.content){let q=$.head,V=$.tail,z=h.head,se=h.tail;e=V,t=y,r=se,n=k,i=w,s=j,o=S,a=x+1,u=O,l=E,f=B,c=N,m=W,b=ie}else if($.atLeastLength(1)&&$.head instanceof Le&&h.atLeastLength(1)&&h.head instanceof Le){let q=$.tail,V=h.head,z=h.tail,se=ci(x,0,_([Ks(V.content)]),T);e=q,t=y,r=z,n=k,i=w,s=j,o=S,a=x+1,u=O,l=E,f=B,c=p(se,N),m=W,b=ie}else if($.atLeastLength(1)&&$.head instanceof we&&h.atLeastLength(1)&&h.head instanceof we){let q=$.head,V=$.tail,z=h.head,se=h.tail,Y=Ke(W,z.mapper),X=Fe(E,x,z.key),le=io(!1,X,Y,ie,q.attributes,z.attributes,T,T),U=le.added,M=le.removed,J=le.events,Z;U.hasLength(0)&&M.hasLength(0)?Z=T:Z=_([hi(U,M)]);let oe=Z,ge;q.inner_html===z.inner_html?ge=oe:ge=p(Qs(z.inner_html),oe);let ft=ge,He;ft.hasLength(0)?He=N:He=p(ci(x,0,ft,_([])),N);let en=He;e=V,t=y,r=se,n=k,i=w,s=j,o=S,a=x+1,u=O,l=E,f=B,c=en,m=W,b=J}else{let q=$.head,V=$.tail,z=h.head,se=h.tail,Y=de(q),X=de(z),le=mi(x-j,Y,z),U,J=tr(ie,E,x,q);U=Wr(J,W,E,x,z);let Z=U;e=V,t=y,r=se,n=k,i=w,s=j-Y+X,o=S,a=x+X,u=O,l=E,f=p(le,B),c=N,m=W,b=Z}}}function gi(e,t,r){return wi(_([t]),fe(),_([r]),fe(),Yt(),0,0,0,0,Kt,T,T,ae,so(e))}var Rr=class{offset=0;#e=null;#s=()=>{};#a=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#a=n}mount(t){Fr(this.#e,this.#u(this.#e,t))}#r=[];push(t){let r=this.offset;r&&(Re(t.changes,n=>{switch(n.kind){case Ir:case qr:n.before=(n.before|0)+r;break;case Mr:case Nr:n.from=(n.from|0)+r;break}}),Re(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();Re(n.changes,o=>{switch(o.kind){case Ir:t.#l(r,o.children,o.before);break;case qr:t.#p(r,o.key,o.before,o.count);break;case _i:t.#d(r,o.key,o.count);break;case Mr:t.#t(r,o.from,o.count);break;case Nr:t.#c(r,o.from,o.count,o.with);break;case fi:t.#i(r,o.content);break;case pi:t.#h(r,o.inner_html);break;case di:t.#f(r,o.added,o.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed);let i=-1,s=null;Re(n.children,o=>{let a=o.index|0,u=s&&i-a===1?s.previousSibling:rr(r,a);t.#r.push({node:u,patch:o}),s=u,i=a})}}#l(t,r,n){let i=lo();Re(r,s=>{let o=this.#u(t,s);Fr(i,o)}),bi(t,i,rr(t,n))}#p(t,r,n,i){let s=co(t,r),o=rr(t,n);for(let a=0;a<i&&s!==null;++a){let u=s.nextSibling;Ts?t.moveBefore(s,o):bi(t,s,o),s=u}}#d(t,r,n){this.#n(t,co(t,r),n)}#t(t,r,n){this.#n(t,rr(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[ee].key;s&&t[ee].keyedChildren.delete(s);for(let[o,{timeout:a}]of r[ee].debouncers??[])clearTimeout(a);t.removeChild(r),r=i}}#c(t,r,n,i){this.#t(t,r,n);let s=this.#u(t,i);bi(t,s,rr(t,r))}#i(t,r){t.data=r??""}#h(t,r){t.innerHTML=r??""}#f(t,r,n){Re(n,i=>{let s=i.name;t[ee].handlers.has(s)?(t.removeEventListener(s,fo),t[ee].handlers.delete(s),t[ee].throttles.has(s)&&t[ee].throttles.delete(s),t[ee].debouncers.has(s)&&(clearTimeout(t[ee].debouncers.get(s).timeout),t[ee].debouncers.delete(s))):(t.removeAttribute(s),ho[s]?.removed?.(t,s))}),Re(r,i=>{this.#m(t,i)})}#u(t,r){switch(r.kind){case Zn:{let n=uo(t,r);return this.#_(n,r),this.#l(n,r.children,0),n}case Qn:return ao(t,r);case Xn:{let n=lo(),i=ao(t,r);return Fr(n,i),Re(r.children,s=>{Fr(n,this.#u(t,s))}),n}case Xs:{let n=uo(t,r);return this.#_(n,r),this.#h(n,r.inner_html),n}}}#_(t,{attributes:r}){Re(r,n=>this.#m(t,n))}#m(t,r){let{debouncers:n,handlers:i,throttles:s}=t[ee],{kind:o,name:a,value:u,prevent_default:l,stop_propagation:f,immediate:c,include:m,debounce:b,throttle:$}=r;switch(o){case Dn:{let y=u??"";if(a==="virtual:defaultValue"){t.defaultValue=y;return}y!==t.getAttribute(a)&&t.setAttribute(a,y),ho[a]?.added?.(t,u);break}case Ws:t[a]=u;break;case Pn:{if(i.has(a)||t.addEventListener(a,fo,{passive:!r.prevent_default}),$>0){let y=s.get(a)??{};y.delay=$,s.set(a,y)}else s.delete(a);if(b>0){let y=n.get(a)??{};y.delay=b,n.set(a,y)}else clearTimeout(n.get(a)?.timeout),n.delete(a);i.set(a,y=>{l&&y.preventDefault(),f&&y.stopPropagation();let h=y.type,k="",w=y.currentTarget;for(;w!==this.#e;){let O=w[ee].key,E=w.parentNode;if(O)k=`${Vn}${O}${k}`;else{let B=E.childNodes,N=[].indexOf.call(B,w);E===this.#e&&(N-=this.offset),k=`${Hn}${N}${k}`}w=E}k=k.slice(1);let j=this.#a?Va(y,m??[]):y,S=s.get(h);if(S){let O=Date.now(),E=S.last||0;O>E+S.delay?(S.last=O,S.lastEvent=y,this.#s(j,k,h,c)):y.preventDefault()}let x=n.get(h);x?(clearTimeout(x.timeout),x.timeout=setTimeout(()=>{y!==s.get(h)?.lastEvent&&this.#s(j,k,h,c)},x.delay)):this.#s(j,k,h,c)});break}}}},Re=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},Fr=(e,t)=>e.appendChild(t),bi=(e,t,r)=>e.insertBefore(t,r??null),uo=(e,{key:t,tag:r,namespace:n})=>{let i=ve.createElementNS(n||vr,r);return at(e,i,t),i},ao=(e,{key:t,content:r})=>{let n=ve.createTextNode(r??"");return at(e,n,t),n},lo=()=>ve.createDocumentFragment(),rr=(e,t)=>e.childNodes[t|0],ee=Symbol("lustre"),at=(e,t,r="")=>{switch(t.nodeType){case Lr:case Sr:t[ee]={key:r,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case jr:t[ee]={key:r};break}e&&r&&e[ee].keyedChildren.set(r,new WeakRef(t))};var co=(e,t)=>e[ee].keyedChildren.get(t).deref(),fo=e=>{let r=e.currentTarget[ee].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Va=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,a=r;s<i.length;s++){if(s===i.length-1){a[i[s]]=o[i[s]];break}a=a[i[s]]??={},o=o[i[s]]}}return r},po=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),Ya=e=>({added(t,r){t[e]=r}}),ho={checked:po("checked"),selected:po("selected"),value:Ya("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var xo=e=>{let t=$o(null,e);if(t===null||t.children instanceof be){let r=_o(e);return e.appendChild(r),nr()}else{if(t.children instanceof he&&t.children.tail instanceof be)return t.children.head;{let r=_o(e);return e.insertBefore(r,e.firstChild),ki(t.children)}}},_o=e=>{let t=ve.createTextNode("");return at(e,t),t},$o=(e,t)=>{switch(t.nodeType){case Lr:{let r=t.getAttribute("data-lustre-key");at(e,t,r),r&&t.removeAttribute("data-lustre-key");let n=t.localName,i=t.namespaceURI,s=!i||i===vr;s&&Ja.includes(n)&&Xa(n,t);let o=Za(t),a=mo(t),u=s?qe(n,o,a):yi(i,n,o,a);return r?ti(r,u):u}case jr:return at(e,t),Qe(t.data);case Sr:return at(e,t),t.childNodes.length>0?ki(mo(t)):null;default:return null}},Ja=["input","select","textarea"],Xa=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),ve.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},mo=e=>{let t=T,r=e.lastChild;for(;r;){let n=$o(e,r),i=r.previousSibling;n?t=new he(n,t):e.removeChild(r),r=i}return t},Za=e=>{let t=e.attributes.length,r=T;for(;t-- >0;)r=new he(Ka(e.attributes[t]),r);return r},Ka=e=>{let t=e.localName,r=e.value;return ot(t,r)};var sr=()=>!!ve;var vi=(e,t)=>e===t;var ir=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#a=s,this.#l=new Rr(this.root,(o,a,u)=>{let[l,f]=or(this.#o,a,u,o);this.#o=l,f.isOk()&&this.dispatch(f[0],!1)}),this.#r=xo(this.root),this.#o=Li(),this.#i=!0,this.#f(n)}root=null;set offset(t){this.#l.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#a(this.#e,t);this.#e=n,this.#f(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#a;#r;#o;#l;#p=!1;#d=[];#t=T;#n=T;#c=null;#i=!1;#h={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#f(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#h);if(this.#t=go(this.#t,t.before_paint),this.#n=go(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#a(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#c),this.#u()):this.#c||(this.#c=requestAnimationFrame(()=>{this.#u()}))}#u(){this.#i=!1,this.#c=null;let t=this.#s(this.#e),{patch:r,events:n}=gi(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#l.push(r),this.#t instanceof he){let i=wo(this.#t);this.#t=T,queueMicrotask(()=>{this.#i=!0,this.#f(i)})}if(this.#n instanceof he){let i=wo(this.#n);this.#n=T,requestAnimationFrame(()=>{this.#i=!0,this.#f(i)})}}};function wo(e){return{synchronous:e,after_paint:T,before_paint:T}}function go(e,t){return e instanceof be?t:t instanceof be?e:Ae(e,t)}var Ne=class extends d{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Li(){return new Ne(fe(),T,T)}function so(e){return new Ne(e.handlers,e.next_dispatched_paths,T)}function vo(e,t,r){return Rn(e,Jn(t,r))}function Dr(e,t,r){let n=vo(e.handlers,t,r),i=e;return new Ne(n,i.dispatched_paths,i.next_dispatched_paths)}function bo(e,t,r){return ke(r,e,(n,i)=>{if(i instanceof re){let s=i.name;return vo(n,t,s)}else return n})}function or(e,t,r,n){let i=p(t,e.next_dispatched_paths),s,o=e;s=new Ne(o.handlers,o.dispatched_paths,i);let a=s,u=kt(a.handlers,t+Yn+r);if(u.isOk()){let l=u[0];return[a,Je(n,l)]}else return[a,new L(_([]))]}function Pr(e,t){return Ys(t,e.dispatched_paths)}function Lo(e,t,r,n,i){return Zt(e,Jn(r,n),pr(i,t))}function er(e,t,r,n,i){let s=Lo(e.handlers,t,r,n,i),o=e;return new Ne(s,o.dispatched_paths,o.next_dispatched_paths)}function yo(e,t,r,n){return ke(n,e,(i,s)=>{if(s instanceof re){let o=s.name,a=s.handler;return Lo(i,t,r,o,a)}else return i})}function Ke(e,t){let r=vi(e,ae),n=vi(t,ae);return n?e:r&&!n?t:i=>e(t(i))}function ko(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(a.hasLength(0))return i;{let u=a.head,l=a.tail;e=jo(i,s,o,u),t=s,r=o+de(u),n=l}}}function jo(e,t,r,n){if(n instanceof pe){let i=n.attributes,s=n.children,o=Fe(t,r,n.key),u=bo(e,o,i);return ko(u,o,0,s)}else if(n instanceof ne){let i=n.children;return ko(e,t,r+1,i)}else if(n instanceof we){let i=n.attributes,s=Fe(t,r,n.key);return bo(e,s,i)}else return e}function tr(e,t,r,n){let i=jo(e.handlers,t,r,n),s=e;return new Ne(i,s.dispatched_paths,s.next_dispatched_paths)}function ji(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,l=i;if(l.hasLength(0))return s;{let f=l.head,c=l.tail;e=So(s,o,a,u,f),t=o,r=a,n=u+de(f),i=c}}}function So(e,t,r,n,i){if(i instanceof pe){let s=i.attributes,o=i.children,a=Fe(r,n,i.key),u=Ke(t,i.mapper),f=yo(e,u,a,s);return ji(f,u,a,0,o)}else if(i instanceof ne){let s=i.children,o=Ke(t,i.mapper),a=n+1;return ji(e,o,r,a,s)}else if(i instanceof we){let s=i.attributes,o=Fe(r,n,i.key),a=Ke(t,i.mapper);return yo(e,a,o,s)}else return e}function Wr(e,t,r,n,i){let s=So(e.handlers,t,r,n,i),o=e;return new Ne(s,o.dispatched_paths,o.next_dispatched_paths)}function oo(e,t,r,n,i){let s=ji(e.handlers,t,r,n,i),o=e;return new Ne(s,o.dispatched_paths,o.next_dispatched_paths)}function qe(e,t,r){return Kn("",ae,"",e,t,r,fe(),!1,!1)}function yi(e,t,r,n){return Kn("",ae,e,t,r,n,fe(),!1,!1)}function Qe(e){return ei("",ae,e)}function nr(){return ei("",ae,"")}function Qa(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof ne){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function ki(e){return Js("",ae,e,fe(),Qa(e,0))}function Eo(e,t){return qe("h1",e,t)}function zo(e,t){return qe("h2",e,t)}function Si(e,t){return qe("div",e,t)}function Ao(e,t){return qe("p",e,t)}function To(e,t){return qe("button",e,t)}function Oi(e){return qe("input",e,T)}var lt=class extends d{constructor(t){super(),this.message=t}},Lt=class extends d{constructor(t,r){super(),this.name=t,this.data=r}};var ct=class extends d{};var Ei=class extends d{constructor(t,r,n,i,s,o,a,u){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=a,this.on_form_restore=u}};function qo(e){let t=new Ei(!1,!0,kr(),kr(),!1,Or,Or,Or);return ke(e,t,(r,n)=>n.apply(r))}var zi=class e{static start({init:t,update:r,view:n},i,s){if(!sr())return new L(new jt);let o=i instanceof HTMLElement?i:ve.querySelector(i);return o?new v(new e(o,t(s),r,n)):new L(new Gr(i))}#e;constructor(t,[r,n],i,s){this.#e=new ir(t,[r,n],s,i)}send(t){switch(t.constructor){case lt:{this.dispatch(t.message,!1);break}case Lt:{this.emit(t.name,t.data);break}case ct:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},No=zi.start;var Ai=class extends d{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var Gr=class extends d{constructor(t){super(),this.selector=t}},jt=class extends d{};function Io(e,t,r){return new Ai(e,t,r,qo(T))}function Mo(e,t,r){return yn(!sr(),new L(new jt),()=>No(e,t,r))}function al(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function Po(e,t){return Us(e,t,T,!1,!1,al(e),0,0)}function Wo(e){return Po("click",$t(e))}function Ti(e){return Po("input",xn(_(["target","value"]),wt,t=>$t(e(t))))}var C=class extends d{constructor(t,r,n,i,s,o,a){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=a}};function pl(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Me(e,t){return new v((()=>{let r=t;return new C(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new g(e))})())}function dl(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("#")&&a===0){let u=s.slice(1);return Me(u,o)}else if(s.startsWith("#")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,c.host,c.port,c.path,new g(l),c.fragment),Me(u,f)}else{if(s==="")return new v((()=>{let u=o;return new C(u.scheme,u.userinfo,u.host,u.port,u.path,new g(i),u.fragment)})());{let l=st(s)[1];e=i,t=l,r=o,n=a+1}}}}function et(e,t){return dl(e,e,t,0)}function hl(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("?")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,c.host,c.port,l,c.query,c.fragment),et(u,f)}else if(s.startsWith("#")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,c.host,c.port,l,c.query,c.fragment),Me(u,f)}else{if(s==="")return new v((()=>{let u=o;return new C(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let l=st(s)[1];e=i,t=l,r=o,n=a+1}}}}function Ot(e,t){return hl(e,e,t,0)}function Ie(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),a,u=i;return a=new C(u.scheme,u.userinfo,u.host,new g(s),u.path,u.query,u.fragment),et(o,a)}else if(n.startsWith("#")){let o=n.slice(1),a,u=i;return a=new C(u.scheme,u.userinfo,u.host,new g(s),u.path,u.query,u.fragment),Me(o,a)}else if(n.startsWith("/")){let o,a=i;return o=new C(a.scheme,a.userinfo,a.host,new g(s),a.path,a.query,a.fragment),Ot(n,o)}else return n===""?new v((()=>{let o=i;return new C(o.scheme,o.userinfo,o.host,new g(s),o.path,o.query,o.fragment)})()):new L(void 0)}}function Hr(e,t){if(e.startsWith(":0")){let r=e.slice(2);return Ie(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return Ie(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return Ie(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return Ie(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return Ie(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return Ie(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return Ie(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return Ie(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return Ie(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return Ie(r,t,9)}else{if(e.startsWith(":"))return new L(void 0);if(e.startsWith("?")){let r=e.slice(1);return et(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Me(r,t)}else return e.startsWith("/")?Ot(e,t):e===""?new v(t):new L(void 0)}}function Uo(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new v((()=>{let u=o;return new C(u.scheme,u.userinfo,new g(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=Q(i,0,a),l,f=o;return l=new C(f.scheme,f.userinfo,new g(u),f.port,f.path,f.query,f.fragment),Hr(s,l)}else if(s.startsWith("/")){let u=Q(i,0,a),l,f=o;return l=new C(f.scheme,f.userinfo,new g(u),f.port,f.path,f.query,f.fragment),Ot(s,l)}else if(s.startsWith("?")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,new g(l),c.port,c.path,c.query,c.fragment),et(u,f)}else if(s.startsWith("#")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,new g(l),c.port,c.path,c.query,c.fragment),Me(u,f)}else{let l=st(s)[1];e=i,t=l,r=o,n=a+1}}}function _l(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new v((()=>{let u=o;return new C(u.scheme,u.userinfo,new g(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&a===0){let u=s.slice(1);return Hr(u,o)}else if(s.startsWith("]")){let u=s.slice(1),l=Q(i,0,a+1),f,c=o;return f=new C(c.scheme,c.userinfo,new g(l),c.port,c.path,c.query,c.fragment),Hr(u,f)}else{if(s.startsWith("/")&&a===0)return Ot(s,o);if(s.startsWith("/")){let u=Q(i,0,a),l,f=o;return l=new C(f.scheme,f.userinfo,new g(u),f.port,f.path,f.query,f.fragment),Ot(s,l)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return et(u,o)}else if(s.startsWith("?")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,new g(l),c.port,c.path,c.query,c.fragment),et(u,f)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return Me(u,o)}else if(s.startsWith("#")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,c.userinfo,new g(l),c.port,c.path,c.query,c.fragment),Me(u,f)}else{let u=st(s),l=u[0],f=u[1];if(pl(l))e=i,t=f,r=o,n=a+1;else return Uo(i,i,o,0)}}}}function ml(e,t){return _l(e,e,t,0)}function xl(e,t){return Uo(e,e,t,0)}function St(e,t){if(e.startsWith("["))return ml(e,t);if(e.startsWith(":")){let r,n=t;return r=new C(n.scheme,n.userinfo,new g(""),n.port,n.path,n.query,n.fragment),Hr(e,r)}else return e===""?new v((()=>{let r=t;return new C(r.scheme,r.userinfo,new g(""),r.port,r.path,r.query,r.fragment)})()):xl(e,t)}function $l(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("@")&&a===0){let u=s.slice(1);return St(u,o)}else if(s.startsWith("@")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(c.scheme,new g(l),c.host,c.port,c.path,c.query,c.fragment),St(u,f)}else{if(s==="")return St(i,o);if(s.startsWith("/"))return St(i,o);if(s.startsWith("?"))return St(i,o);if(s.startsWith("#"))return St(i,o);{let l=st(s)[1];e=i,t=l,r=o,n=a+1}}}}function wl(e,t){return $l(e,e,t,0)}function Ci(e,t){if(e==="//")return new v((()=>{let r=t;return new C(r.scheme,r.userinfo,new g(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return wl(r,t)}else return Ot(e,t)}function gl(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("/")&&a===0)return Ci(s,o);if(s.startsWith("/")){let u=Q(i,0,a),l,f=o;return l=new C(new g(xe(u)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Ci(s,l)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return et(u,o)}else if(s.startsWith("?")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(new g(xe(l)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),et(u,f)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return Me(u,o)}else if(s.startsWith("#")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(new g(xe(l)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),Me(u,f)}else{if(s.startsWith(":")&&a===0)return new L(void 0);if(s.startsWith(":")){let u=s.slice(1),l=Q(i,0,a),f,c=o;return f=new C(new g(xe(l)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),Ci(u,f)}else{if(s==="")return new v((()=>{let u=o;return new C(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let l=st(s)[1];e=i,t=l,r=o,n=a+1}}}}}function Fo(e){let t,r=e.fragment;if(r instanceof g){let x=r[0];t=_(["#",x])}else t=_([]);let n=t,i,s=e.query;if(s instanceof g){let x=s[0];i=p("?",p(x,n))}else i=n;let o=i,a=p(e.path,o),u,l=e.host,f=xt(e.path,"/");if(l instanceof g&&!f&&l[0]!==""){let x=l[0];u=p("/",a)}else u=a;let c=u,m,b=e.host,$=e.port;if(b instanceof g&&$ instanceof g){let x=$[0];m=p(":",p(ye(x),c))}else m=c;let y=m,h,k=e.scheme,w=e.userinfo,j=e.host;if(k instanceof g&&w instanceof g&&j instanceof g){let x=k[0],O=w[0],E=j[0];h=p(x,p("://",p(O,p("@",p(E,y)))))}else if(k instanceof g&&w instanceof A&&j instanceof g){let x=k[0],O=j[0];h=p(x,p("://",p(O,y)))}else if(k instanceof g&&w instanceof g&&j instanceof A){let x=k[0];h=p(x,p(":",y))}else if(k instanceof g&&w instanceof A&&j instanceof A){let x=k[0];h=p(x,p(":",y))}else if(k instanceof A&&w instanceof A&&j instanceof g){let x=j[0];h=p("//",p(x,y))}else h=y;return mt(h)}var bl=new C(new A,new A,new A,new A,"",new A,new A);function Bi(e){return gl(e,e,bl,0)}var Et=class extends d{constructor(t,r,n,i,s,o,a,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=a,this.query=u}};function Go(e){return new C(new g(vs(e.scheme)),new A,new g(e.host),e.port,e.path,e.query,new A)}function Ho(e){return Xe((()=>{let t=e.scheme,r=Hi(t,"");return Ls(r)})(),t=>Xe((()=>{let r=e.host;return rn(r,void 0)})(),r=>{let n=new Et(new Gt,_([]),"",t,r,e.port,e.path,e.query);return new v(n)}))}function Vo(e,t,r){let n=wn(e.headers,xe(t),r),i=e;return new Et(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Yo(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,a=e.path,u=e.query;return new Et(r,n,t,i,s,o,a,u)}function Jo(e,t){let r=e;return new Et(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}var zt=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Vr(e){return Promise.resolve(zt.wrap(e))}function Xo(e,t){return e.then(r=>t(zt.unwrap(r)))}function ur(e,t){return e.then(r=>zt.wrap(t(zt.unwrap(r))))}function Zo(e,t){return ur(e,n=>(t(n),n))}function Yr(e,t){return Xo(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Vr(new L(i))}})}async function Qo(e){try{return new v(await fetch(e))}catch(t){return new L(new At(t.toString()))}}function eu(e){return new xr(e.status,Se.fromArray([...e.headers]),e)}function Sl(e){let t=Fo(Go(e)),r=ks(e.method).toUpperCase(),n={headers:Ol(e.headers),method:r};return[t,n]}function tu(e){let[t,r]=Sl(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function Ol(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function qi(e){let t;try{t=await e.body.text()}catch{return new L(new Tt)}return new v(e.withFields({body:t}))}var At=class extends d{constructor(t){super(),this[0]=t}},Tt=class extends d{};function ru(e){let r=tu(e),n=Qo(r);return Yr(n,i=>Vr(new v(eu(i))))}var Ni=e=>{if(!globalThis.location)return new L(void 0);let t=new URL(e,globalThis.location.href),r=Tl(t);return new v(r)},Tl=e=>{let t=r=>r?new g(r):new A;return new C(t(e.protocol?.slice(0,-1)),new A,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var Jr=class extends d{},Xr=class extends d{constructor(t){super(),this[0]=t}},Ii=class extends d{constructor(t){super(),this[0]=t}};var Mi=class extends d{},Di=class extends d{constructor(t){super(),this[0]=t}},Pi=class extends d{constructor(t){super(),this.run=t}};function iu(e){return new Pi(t=>e(Rt(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new v(r)}else if(n>=400&&n<600){let i=n;return new L(new Ii(r))}else return new L(new Di(r))})))}function Cl(e,t){return Fn(r=>{let n=ru(e),i=Yr(n,qi),s=ur(i,a=>Ft(a,u=>u instanceof At?new Mi:u instanceof Tt?new Jr:new Jr)),o=ur(s,t.run);Zo(o,r)})}function Bl(e,t){return Cl(e,t)}function nu(e,t){return Fn(r=>{let n=new L(e),i=t.run(n);return r(i)})}function ql(e){let t;return e.startsWith("./")?t=Ni(e):e.startsWith("/")?t=Ni(e):t=Bi(e),hr(t,new Xr(e))}function su(e,t,r){let n=ql(e);if(n.isOk()){let i=n[0],s=Ho(i),o=Ut(s,u=>{let f=Jo(u,new Ht),c=Vo(f,"content-type","application/json"),m=Yo(c,qn(t));return Bl(m,r)}),a=Ft(o,u=>nu(new Xr(e),r));return bn(a)}else{let i=n[0];return nu(i,r)}}var Zr=class extends d{constructor(t,r){super(),this.username=t,this.password=r}},Wi=class extends d{constructor(t){super(),this.passphrase=t}};function ou(e){let t=e.username,r=e.password;return bt(_([["username",Pe(t)],["password",Pe(r)]]))}function uu(){return dr("passphrase",wt,e=>$t(new Wi(e)))}var Ge=class extends d{constructor(t,r,n,i){super(),this.username=t,this.password=r,this.returned_text=n,this.error=i}},ar=class extends d{constructor(t){super(),this[0]=t}},Kr=class extends d{constructor(t){super(),this.username=t}},Qr=class extends d{constructor(t){super(),this.password=t}},Ui=class extends d{};function Ml(e){return[new Ge("","",new A,new A),Ue()]}function Dl(e){let t=ou(e);return su("/api/login",t,iu(n=>new ar(n)))}function Pl(e,t){if(t instanceof ar&&t[0].isOk()){let r=t[0][0],n=(()=>{let i=r.body;return gr(i,uu())})();if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new Ge(s.username,s.password,new g(i.passphrase),s.error)})(),Ue()]}else return[(()=>{let i=e;return new Ge(i.username,i.password,i.returned_text,new g("The server did an oopsie!!"))})(),Ue()]}else{if(t instanceof ar&&!t[0].isOk())return[(()=>{let r=e;return new Ge(r.username,r.password,r.returned_text,new g("GET OUT!!! I TOLD YOU TO BUZZ OFF DIDNT I"))})(),Ue()];if(t instanceof Kr){let r=t.username;return[(()=>{let n=e;return new Ge(r,n.password,n.returned_text,new A)})(),Ue()]}else if(t instanceof Qr){let r=t.password;return[(()=>{let n=e;return new Ge(n.username,r,n.returned_text,new A)})(),Ue()]}else return[(()=>{let r=e;return new Ge(r.username,r.password,new A,new A)})(),Dl(new Zr(e.username,e.password))]}}function Wl(e){return Si(_([]),_([Eo(_([]),_([Qe("Buzz off")])),Si(_([]),_([Oi(_([Ti(t=>new Kr(t)),Wn("username")])),Oi(_([Ti(t=>new Qr(t)),Wn("password")])),To(_([Wo(new Ui)]),_([Qe("Login")]))])),(()=>{let t=e.error;if(t instanceof g){let r=t[0];return Ao(_([Rs("color","red")]),_([Qe(r)]))}else return nr()})(),(()=>{let t=e.returned_text;if(t instanceof g){let r=t[0];return zo(_([]),_([Qe(r)]))}else return nr()})()]))}function au(){let e=Io(Ml,Pl,Wl),t=Mo(e,"#app",_([]));if(!t.isOk())throw qt("let_assert","client",15,"main","Pattern match failed, no pattern matched the value.",{value:t})}au();
